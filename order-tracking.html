<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lacak Pesanan - Klik Second</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="auth-modal.css">
  <link rel="stylesheet" href="notification.css">
  <link rel="stylesheet" href="order-tracking.css">
</head>
<body>
  <div id="particles-js"></div>

  <!-- HEADER -->
  <header class="header">
    <nav class="navbar">
      <img src="LogoKlikSecondTransparent.png" class="logo" alt="Klik Second">

      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="search.html">Cari Produk</a></li>
        <li><a href="lelang.html">Lelang</a></li>
        <li><a href="pegadaian.html">Pegadaian</a></li>
        <li><a href="index.html#about">About Us</a></li>
      </ul>

      <!-- Auth Buttons -->
      <div class="auth-buttons">
        <button class="btn-login">Login</button>
        <button class="btn-register">Daftar</button>
      </div>

      <!-- User Profile Section -->
      <div class="user-profile-section">
        <button class="notification-btn">
          <i class="bi bi-bell-fill"></i>
          <span class="notification-badge">0</span>
        </button>

        <div class="user-profile-trigger">
          <img src="https://ui-avatars.com/api/?name=User&background=00ffff&color=000" alt="User" class="user-avatar">
          <div class="user-info">
            <span class="user-name">User Name</span>
            <span class="user-role">Seller</span>
          </div>
          <i class="bi bi-chevron-down dropdown-arrow"></i>
        </div>

        <div class="user-dropdown">
          <a href="profile.html" class="dropdown-item">
            <i class="bi bi-person-circle"></i>
            <span>Profile Saya</span>
          </a>
          <a href="profile.html?tab=products" class="dropdown-item">
            <i class="bi bi-box-seam"></i>
            <span>Produk Saya</span>
          </a>
          <a href="profile.html?tab=orders" class="dropdown-item">
            <i class="bi bi-bag-check"></i>
            <span>Pesanan Saya</span>
          </a>
          <a href="profile.html?tab=settings" class="dropdown-item">
            <i class="bi bi-gear"></i>
            <span>Pengaturan</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item" id="logout-btn">
            <i class="bi bi-box-arrow-right"></i>
            <span>Keluar</span>
          </a>
        </div>
      </div>
    </nav>
  </header>

  <!-- NOTIFICATION PANEL -->
  <div id="notification-panel" class="notification-panel">
    <div class="notification-header">
      <h3><i class="bi bi-bell-fill"></i> Notifikasi</h3>
      <div class="notification-actions">
        <button class="mark-all-read">Tandai Semua</button>
        <button class="close-notification">
          <i class="bi bi-x"></i>
        </button>
      </div>
    </div>
    <div class="notification-list" id="notification-list"></div>
  </div>

  <!-- TRACKING SECTION -->
  <section class="tracking-section">
    <div class="tracking-container">
      
      <!-- Back Button -->
      <a href="profile.html?tab=orders" class="tracking-back-btn">
        <i class="bi bi-arrow-left"></i>
        <span>Kembali ke Pesanan</span>
      </a>

      <!-- Loading State -->
      <div id="tracking-loading" class="tracking-loading" style="display: none;">
        <i class="bi bi-arrow-repeat"></i>
        <p>Memuat data pelacakan...</p>
      </div>

      <!-- Error State -->
      <div id="tracking-error" class="tracking-error" style="display: none;">
        <i class="bi bi-exclamation-triangle"></i>
        <h3>Pesanan Tidak Ditemukan</h3>
        <p>Maaf, data pesanan yang Anda cari tidak ditemukan.</p>
        <button class="btn-retry" onclick="window.location.href='profile.html?tab=orders'">
          <i class="bi bi-arrow-left"></i>
          Kembali ke Pesanan
        </button>
      </div>

      <!-- Main Content -->
      <div id="tracking-content" style="display: none;">
        
        <!-- Tracking Header -->
        <div class="tracking-header">
          <div class="tracking-header-top">
            <div class="tracking-order-info">
              <h1>
                <i class="bi bi-truck"></i>
                Lacak Pesanan
              </h1>
              <p class="tracking-order-id" id="order-id">-</p>
              <p class="tracking-order-date" id="order-date">-</p>
            </div>
            <div>
              <span class="tracking-status-badge" id="status-badge">-</span>
            </div>
          </div>
        </div>

        <!-- Tracking Grid -->
        <div class="tracking-grid">
          
          <!-- Main Tracking -->
          <div class="tracking-main">
            
            <!-- Live Tracking Card -->
            <div class="live-tracking-card">
              <h2>
                <i class="bi bi-geo-alt-fill"></i>
                Status Pengiriman
                <span class="live-indicator">
                  <span class="live-dot"></span>
                  LIVE
                </span>
              </h2>

              <!-- Progress Bar -->
              <div class="tracking-progress">
                <div class="progress-bar-container">
                  <div class="progress-bar-fill" id="progress-bar" style="width: 0%"></div>
                </div>
                <p class="progress-percentage" id="progress-percentage">0% Complete</p>
              </div>

              <!-- Timeline -->
              <div class="tracking-timeline" id="tracking-timeline">
                <!-- Timeline items will be loaded dynamically -->
              </div>
            </div>

          </div>

          <!-- Sidebar -->
          <div class="tracking-sidebar">
            
            <!-- Shipping Info -->
            <div class="shipping-info-card">
              <h3>
                <i class="bi bi-truck"></i>
                Info Pengiriman
              </h3>
              <div class="info-item">
                <label>Kurir</label>
                <p id="courier-name">-</p>
              </div>
              <div class="info-item">
                <label>No. Resi</label>
                <div class="tracking-number">
                  <span id="tracking-number">-</span>
                  <button class="copy-btn" onclick="OrderTrackingSystem.copyTrackingNumber()">
                    <i class="bi bi-clipboard"></i> Salin
                  </button>
                </div>
              </div>
              <div class="info-item">
                <label>Alamat Tujuan</label>
                <p id="shipping-address">-</p>
              </div>
              <div class="info-item">
                <label>Estimasi Tiba</label>
                <p id="estimated-arrival">-</p>
              </div>
            </div>

            <!-- Product Info -->
            <div class="product-info-card">
              <h3>
                <i class="bi bi-box-seam"></i>
                Detail Produk
              </h3>
              <div id="product-list">
                <!-- Products will be loaded dynamically -->
              </div>
            </div>

            <!-- Contact Support -->
            <div class="contact-card">
              <h3>
                <i class="bi bi-headset"></i>
                Butuh Bantuan?
              </h3>
              <p>Tim customer service kami siap membantu Anda 24/7</p>
              <div class="contact-buttons">
                <button class="contact-btn whatsapp" onclick="OrderTrackingSystem.contactWhatsApp()">
                  <i class="bi bi-whatsapp"></i>
                  WhatsApp
                </button>
                <button class="contact-btn email" onclick="OrderTrackingSystem.contactEmail()">
                  <i class="bi bi-envelope"></i>
                  Email Support
                </button>
              </div>
            </div>

          </div>

        </div>

      </div>

    </div>
  </section>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="users.js"></script>
  <script src="session-manager.js"></script>
  <script src="notification-handler.js"></script>
  <script src="order-tracking-system.js"></script>
  <script src="script.js"></script>
</body>
</html>